[gd_scene load_steps=12 format=3 uid="uid://cf42e2xkqcbew"]

[ext_resource type="Texture2D" uid="uid://djkmrtl2nfm3s" path="res://assests/textures/grids/Light/texture_13.png" id="1_jrcl7"]
[ext_resource type="Script" path="res://scripts/enemy/spot_light.gd" id="1_l0r2i"]
[ext_resource type="Texture2D" uid="uid://c3tsgpq3k48ho" path="res://assests/textures/grids/Dark/texture_02.png" id="2_ot7k8"]
[ext_resource type="Texture2D" uid="uid://dko2pc0uq6pwf" path="res://assests/textures/grids/Green/texture_01.png" id="3_72b58"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_n444p"]
radius = 0.1
height = 5.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_y176j"]
albedo_color = Color(0.97315, 0.890989, 0.24152, 1)
albedo_texture = ExtResource("1_jrcl7")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_3si3c"]
albedo_texture = ExtResource("2_ot7k8")

[sub_resource type="BoxShape3D" id="BoxShape3D_yyl1k"]
size = Vector3(0.14, 0.075, 0.375)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wi5ey"]
albedo_texture = ExtResource("3_72b58")

[sub_resource type="CylinderMesh" id="CylinderMesh_dfcky"]
top_radius = 4.283
bottom_radius = 0.025
height = 13.354

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_gimis"]
points = PackedVector3Array(-4.283, 6.677, 0, -4.26288, 6.677, -0.420083, -3.43193, 4.00515, 0, -4.26288, 6.677, 0.419244, -4.20083, 6.677, -0.835973, -3.36569, 4.00515, -0.669952, -3.41516, 4.00515, -0.337073, -3.41516, 4.00515, 0.336234, -1.72058, -1.33592, -0.170213, -1.72896, -1.33592, 0, -1.72058, -1.33592, 0.169374, -3.36569, 4.00515, 0.669114, -4.20083, 6.677, 0.835135, -4.09937, 6.677, -1.24348, -3.28436, 4.00515, -0.996125, -2.46935, 1.33462, -0.749609, -1.69542, -1.33592, -0.337911, -0.0251546, -6.677, -0.00503111, -0.0251546, -6.677, 0.00419235, -1.69542, -1.33592, 0.337072, -2.46935, 1.33462, 0.74877, -3.28436, 4.00515, 0.995286, -4.09937, 6.677, 1.24264, -3.95767, 6.677, -1.63925, -1.59732, -1.33592, -0.661568, -0.0226393, -6.677, -0.0125775, -0.0226393, -6.677, 0.0117388, -3.95767, 6.677, 1.63841, -1.59732, -1.33592, 0.660729, -3.77739, 6.677, -2.01908, -3.02694, 4.00515, -1.61828, -3.17033, 4.00515, -1.31391, -2.14569, 1.33462, -1.43382, -0.0184469, -6.677, -0.0184469, -0.0184469, -6.677, 0.0176082, -2.14569, 1.33462, 1.43298, -3.02694, 4.00515, 1.61744, -3.17033, 4.00515, 1.31307, -3.77739, 6.677, 2.01824, -3.5619, 6.677, -2.37963, -2.65298, 4.00515, -2.17756, -0.678337, -4.00646, -0.556756, -2.42659, 4.00515, -2.42659, -2.17756, 4.00515, -2.65298, -0.556756, -4.00646, -0.678337, -1.43382, 1.33462, -2.14569, -0.0125775, -6.677, -0.0226393, -0.556756, -4.00646, 0.677499, -2.17756, 4.00515, 2.65214, -2.42659, 4.00515, 2.42575, -2.65298, 4.00515, 2.17672, -0.678337, -4.00646, 0.555918, -0.0125775, -6.677, 0.0218005, -1.43382, 1.33462, 2.14485, -3.5619, 6.677, 2.37879, -3.31119, 6.677, -2.71754, -3.02862, 6.677, -3.02862, -2.71754, 6.677, -3.31119, -2.37963, 6.677, -3.5619, -1.61828, 4.00515, -3.02694, -0.661568, -1.33592, -1.59732, -0.749609, 1.33462, -2.46935, -0.00503111, -6.677, -0.0251546, -2.37963, 6.677, 3.56106, -2.71754, 6.677, 3.31035, -3.02862, 6.677, 3.02778, -3.31119, 6.677, 2.7167, -0.661568, -1.33592, 1.59648, -1.61828, 4.00515, 3.02611, -0.00503111, -6.677, 0.0243163, -0.749609, 1.33462, 2.46851, -2.01908, 6.677, -3.77739, -1.63925, 6.677, -3.95767, -1.31391, 4.00515, -3.17033, -0.996125, 4.00515, -3.28436, -0.669952, 4.00515, -3.36569, -0.337911, -1.33592, -1.69542, -0.170213, -1.33592, -1.72058, 0, -1.33592, -1.72896, 0.00419235, -6.677, -0.0251546, -2.01908, 6.677, 3.77655, -1.63925, 6.677, 3.95683, -1.31391, 4.00515, 3.16949, 0.00419235, -6.677, 0.0243163, 0, -1.33592, 1.72813, -0.170213, -1.33592, 1.71974, -0.337911, -1.33592, 1.69459, -0.669952, 4.00515, 3.36485, -0.996125, 4.00515, 3.28352, -1.24348, 6.677, -4.09937, -0.835973, 6.677, -4.20083, -0.420083, 6.677, -4.26288, -0.337073, 4.00515, -3.41516, 0, 4.00515, -3.43193, 0.169374, -1.33592, -1.72058, 0.0117388, -6.677, -0.0226393, 0.337072, -1.33592, -1.69542, 0.74877, 1.33462, -2.46935, -1.24348, 6.677, 4.09853, 0.337072, -1.33592, 1.69459, 0.169374, -1.33592, 1.71974, 0.0117388, -6.677, 0.0218005, 0.74877, 1.33462, 2.46851, 0, 6.677, 4.283, -0.337073, 4.00515, 3.41433, -0.420083, 6.677, 4.26204, -0.835973, 6.677, 4.19999, 0, 6.677, -4.283, 0.419244, 6.677, -4.26288, 0.336234, 4.00515, -3.41516, 0.669114, 4.00515, -3.36569, 0.660729, -1.33592, -1.59732, 1.61744, 4.00515, -3.02694, 1.43298, 1.33462, -2.14569, 0.0176082, -6.677, -0.0184469, 0.995286, 4.00515, -3.28436, 1.63841, 6.677, -3.95767, 0.669114, 4.00515, 3.36485, 0.336234, 4.00515, 3.41433, 0.660729, -1.33592, 1.59648, 0.0176082, -6.677, 0.0176082, 1.43298, 1.33462, 2.14485, 1.61744, 4.00515, 3.02611, 1.63841, 6.677, 3.95683, 0.995286, 4.00515, 3.28352, 0.419244, 6.677, 4.26204, 0.835135, 6.677, -4.20083, 1.24264, 6.677, -4.09937, 1.31307, 4.00515, -3.17033, 2.01824, 6.677, -3.77739, 2.37879, 6.677, -3.5619, 2.17672, 4.00515, -2.65298, 0.555918, -4.00646, -0.678337, 2.42575, 4.00515, -2.42659, 2.65214, 4.00515, -2.17756, 0.677499, -4.00646, -0.556756, 2.14485, 1.33462, -1.43382, 0.0218005, -6.677, -0.0125775, 1.24264, 6.677, 4.09853, 0.835135, 6.677, 4.19999, 1.31307, 4.00515, 3.16949, 0.677499, -4.00646, 0.555918, 2.65214, 4.00515, 2.17672, 2.42575, 4.00515, 2.42575, 2.17672, 4.00515, 2.65214, 0.555918, -4.00646, 0.677499, 0.0218005, -6.677, 0.0117388, 2.14485, 1.33462, 1.43298, 2.37879, 6.677, 3.56106, 2.01824, 6.677, 3.77655, 2.7167, 6.677, -3.31119, 3.02778, 6.677, -3.02862, 3.31035, 6.677, -2.71754, 3.56106, 6.677, -2.37963, 3.02611, 4.00515, -1.61828, 1.59648, -1.33592, -0.661568, 2.46851, 1.33462, -0.749609, 0.0243163, -6.677, -0.00503111, 3.56106, 6.677, 2.37879, 3.31035, 6.677, 2.7167, 3.02778, 6.677, 3.02778, 2.7167, 6.677, 3.31035, 1.59648, -1.33592, 0.660729, 3.02611, 4.00515, 1.61744, 0.0243163, -6.677, 0.00419235, 2.46851, 1.33462, 0.74877, 3.77655, 6.677, -2.01908, 3.95683, 6.677, -1.63925, 3.16949, 4.00515, -1.31391, 3.28352, 4.00515, -0.996125, 3.36485, 4.00515, -0.669952, 1.69459, -1.33592, -0.337911, 1.71974, -1.33592, -0.170213, 1.72813, -1.33592, 0, 3.77655, 6.677, 2.01824, 3.95683, 6.677, 1.63841, 3.16949, 4.00515, 1.31307, 1.71974, -1.33592, 0.169374, 1.69459, -1.33592, 0.337072, 3.36485, 4.00515, 0.669114, 3.28352, 4.00515, 0.995286, 4.09853, 6.677, -1.24348, 4.19999, 6.677, -0.835973, 4.26204, 6.677, -0.420083, 3.41433, 4.00515, -0.337073, 4.283, 6.677, 0, 4.09853, 6.677, 1.24264, 3.41433, 4.00515, 0.336234, 4.26204, 6.677, 0.419244, 4.19999, 6.677, 0.835135)

[node name="SpotLight" type="CharacterBody3D" node_paths=PackedStringArray("detection_area", "detection_ray_cast")]
script = ExtResource("1_l0r2i")
detection_area = NodePath("Light/Detection")
detection_ray_cast = NodePath("Light/DetectionRayCast")

[node name="Pole" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_n444p")

[node name="CSGBox3D" type="CSGCylinder3D" parent="Pole"]
radius = 0.1
height = 5.0
sides = 10
material = SubResource("StandardMaterial3D_y176j")

[node name="CSGSphere3D" type="CSGSphere3D" parent="Pole"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5059, 0)
radius = 0.1
material = SubResource("StandardMaterial3D_3si3c")

[node name="Light" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.978293, 0.207229, 0, -0.207229, 0.978293, 0, 3.61385, -0.116284)
shape = SubResource("BoxShape3D_yyl1k")

[node name="CSGBox3D" type="CSGBox3D" parent="Light"]
size = Vector3(0.14, 0.075, 0.375)
material = SubResource("StandardMaterial3D_wi5ey")

[node name="Detection" type="Area3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 0.958681, 0.284484, 0, -0.284484, 0.958681, 0, 0.0564549, -0.162609)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Light/Detection"]
transform = Transform3D(1, 0, 0, 0, 0, 1, 0, -1, 0, 0, -0.0469947, -6.6938)
visible = false
mesh = SubResource("CylinderMesh_dfcky")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Light/Detection"]
transform = Transform3D(1, 0, 0, 0, 0, 1, 0, -1, 0, 0, -0.0469947, -6.6938)
shape = SubResource("ConvexPolygonShape3D_gimis")

[node name="DetectionRayCast" type="RayCast3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 0.972614, 0.232427, 0, -0.232427, 0.972614, 0, 0.00147414, -0.178045)
target_position = Vector3(0, 0, -100)

[node name="VisionTimer" type="Timer" parent="."]
autostart = true

[connection signal="timeout" from="VisionTimer" to="." method="_on_vision_timer_timeout"]
